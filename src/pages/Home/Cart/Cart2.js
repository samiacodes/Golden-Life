'use client';
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState, useEffect } from "react";
import { ChevronDown, ChevronUp, Gift, Plus, ShoppingBag, X } from 'lucide-react';
const Button = ({ children, className = '', variant = 'default', ...props }) => (_jsx("button", { className: `px-4 py-2 rounded ${variant === 'outline' ? 'border border-gray-300' : 'bg-blue-500 text-white'} ${className}`, ...props, children: children }));
export default function Cart2() {
    const [isOpen, setIsOpen] = useState(false);
    const [showCode, setShowCode] = useState(false);
    const [items, setItems] = useState([]);
    useEffect(() => {
        const savedCart = localStorage.getItem('cart');
        if (savedCart) {
            setItems(JSON.parse(savedCart));
        }
    }, []);
    const total = items.reduce((sum, item) => sum + item.price * item.quantity, 0);
    const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);
    const updateQuantity = (id, delta) => {
        const newItems = items.map(item => item.id === id ? { ...item, quantity: Math.max(1, item.quantity + delta) } : item);
        setItems(newItems);
        localStorage.setItem('cart', JSON.stringify(newItems));
    };
    return (_jsxs(_Fragment, { children: [_jsx("button", { onClick: () => setIsOpen(true), className: "fixed right-0 top-[55%] -translate-y-1/2 bg-white border-2 border-primary-light rounded-l-full px-4 py-2 shadow-lg z-50", children: _jsxs("div", { className: "flex items-center", children: [_jsx(ShoppingBag, { className: "h-6 w-6 text-red-500" }), _jsx("div", { className: "border-l border-gray-300 h-8 mx-2" }), _jsxs("div", { children: [_jsxs("div", { className: "font-semibold", children: [totalItems, " ITEMS"] }), _jsxs("div", { className: "text-sm", children: ["\u20B9 ", total] })] })] }) }), isOpen && (_jsx("div", { className: "fixed inset-0 bg-black bg-opacity-50 flex justify-end  z-50 pt-16", children: _jsxs("div", { className: "bg-white rounded-md w-full max-w-md h-[80vh] overflow-auto rounded-t-lg shadow-lg", children: [_jsx("div", { className: "sticky top-0 bg-white border-b z-10", children: _jsxs("div", { className: "flex items-center justify-between p-4", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Plus, { className: "h-5 w-5" }), _jsxs("span", { className: "font-medium", children: [items.length, " ITEMS"] })] }), _jsx(Button, { variant: "outline", className: "text-sm", onClick: () => setIsOpen(false), children: _jsx(X, { className: "h-4 w-4" }) })] }) }), _jsx("div", { className: "divide-y", children: items.map((item) => (_jsxs("div", { className: "p-4 flex gap-4", children: [_jsx("div", { className: "w-1/3", children: _jsx("img", { alt: item.name, className: "w-full h-auto object-cover", src: item.image, width: 100, height: 100 }) }), _jsxs("div", { className: "flex-1 flex flex-col", children: [_jsx("h3", { className: "font-medium text-sm mb-2 text-nowrap", children: item.name.length > 40 ? `${item.name.slice(0, 40)}...` : item.name }), _jsxs("div", { className: "flex items-center justify-around mt-auto ", children: [_jsxs("div", { className: "flex items-center border rounded text-xs ", children: [_jsx("button", { onClick: () => updateQuantity(item.id, -1), className: "px-1 py-0.5", children: _jsx(ChevronDown, { className: "h-3 w-3" }) }), _jsx("span", { className: "w-6 text-center", children: item.quantity }), _jsx("button", { onClick: () => updateQuantity(item.id, 1), className: "px-1 py-0.5", children: _jsx(ChevronUp, { className: "h-3 w-3" }) })] }), _jsxs("p", { className: "text-sm font-medium", children: ["\u20B9", item.price * item.quantity] })] })] }), _jsx("button", { onClick: () => updateQuantity(item.id, -item.quantity), className: "text-gray-500 hover:text-gray-700 self-start", children: "\u00D7" })] }, item.id))) }), _jsxs("div", { className: "sticky bottom-0 bg-white border-t p-4 space-y-4", children: [_jsx("div", { className: "flex items-center gap-2", children: _jsxs(Button, { className: "w-full bg-primary-default hover:bg-gray-300 text-gray-800 flex items-center justify-center gap-2", onClick: () => setShowCode(!showCode), children: [_jsx(Gift, { className: "h-6 w-6 " }), "Have a special code?"] }) }), showCode && (_jsxs("div", { className: "flex gap-2", children: [_jsx("input", { className: "flex-1 px-3 py-2 border rounded", placeholder: "Referral/Discount Code" }), _jsx(Button, { className: "bg-primary-default", children: "Go" }), _jsx(Button, { variant: "outline", onClick: () => setShowCode(false), children: "Close" })] })), _jsx("div", { children: _jsxs("button", { className: "w-full flex justify-center bg-primary-default text-white text-xl py-2 rounded text-center gap-6", children: [_jsx("span", { children: "Place Orderedffff" }), _jsx("div", { className: "border-2 border-primary-light h-8 mx-2" }), _jsxs("span", { className: "text-nowrap space-x-3 text-xl", children: ["\u20B9 ", total] })] }) })] })] }) }))] }));
}
